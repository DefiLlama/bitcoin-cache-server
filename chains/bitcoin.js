const ElectrumClient = require('electrum-client');
const bitcoin = require('bitcoinjs-lib');
const ecc = require('tiny-secp256k1');
const axios = require('axios');
const { PromisePool } = require('@supercharge/promise-pool');
const { pullFromAllium } = require('./allium');
bitcoin.initEccLib(ecc);

// https://1209k.com/bitcoin-eye/ele.php
const configStr = `fulcrum.not.fyi,51002,ssl,00000000,888612,2025-03-20,09:50:33,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
fakenews.fiatfaucet.com,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
fulcrum.slicksparks.ky,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9272
electrum.coinucopia.io,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
electrum.blockstream.info,50002,ssl,00000000,888612,2025-03-20,09:50:34,electrs-esplora,0.4.1,1.4,open,2025-03-20,10:05:01,OK,1.0000,1.0000,0.9999
btc.electroncash.dk,60001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9268
electrum.blockstream.info,50001,tcp,00000000,888612,2025-03-20,09:50:34,electrs-esplora,0.4.1,1.4,open,2025-03-20,10:05:00,OK,1.0000,1.0000,0.9999
electrum.coinucopia.io,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
fulcrum.sethforprivacy.com,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
hippo.1209k.com,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
mainnet.foundationdevices.com,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
btc.electroncash.dk,60002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
static.82.9.235.167.clients.your-server.de,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
2ex.digitaleveryware.com,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:07,OK,1.0000,1.0000,1.0000
static.82.9.235.167.clients.your-server.de,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
bolt.schulzemic.net,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9989
bolt.schulzemic.net,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9988
168.119.136.176,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
electrum.tjader.xyz,50002,ssl,00000000,888612,2025-03-20,09:50:34,electrs/0.10.8,1.4,open,2025-03-20,02:40:06,OK,1.0000,0.9920,0.8521
static.176.136.119.168.clients.your-server.de,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
smmalis37.ddns.net,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9974
mempool.8333.mobi,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9279
blockstream.info,700,ssl,00000000,888612,2025-03-20,09:50:34,electrs-esplora,0.4.1,1.4,open,2025-03-20,10:05:00,OK,1.0000,1.0000,0.9999
mempool.8333.mobi,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9279
bitcoin.aranguren.org,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,0.9856,0.9992
bitcoin.aranguren.org,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,0.9856,0.9755
smmalis37.ddns.net,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9974
167.235.9.82,50002,ssl,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
blockstream.info,110,tcp,00000000,888612,2025-03-20,09:50:34,electrs-esplora,0.4.1,1.4,open,2025-03-20,10:05:00,OK,1.0000,1.0000,0.9999
167.235.9.82,50001,tcp,00000000,888612,2025-03-20,09:50:34,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
d762li0k0g.d.firewalla.org,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
b6.1209k.com,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
d762li0k0g.d.firewalla.org,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
btc.reichster.de,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9959
b.1209k.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
b6.1209k.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
fulcrum1.getsrt.net,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.10.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9998
ip212-227-150-147.pbiaas.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
btc.reichster.de,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9268
ip212-227-150-147.pbiaas.com,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrum.petrkr.net,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.10.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,0.6185,0.7962
bitcoin.stackwallet.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
api.ordimint.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
api.ordimint.com,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
fulcrum-core.1209k.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
ax102.blockeng.ch,50002,ssl,00000000,888612,2025-03-20,09:50:35,electrs-esplora,0.4.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8787
fulcrum.theuplink.net,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9997
electrum.jochen-hoenicke.de,50006,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
electrum.jochen-hoenicke.de,50099,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
kittyserver.ddnsfree.com,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9984
tool.sh,50001,tcp,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9279
kittyserver.ddnsfree.com,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9984
tool.sh,50002,ssl,00000000,888612,2025-03-20,09:50:35,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9279
vmd128083.contaboserver.net,50001,tcp,00000000,888612,2025-03-20,09:50:36,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
electrum.sare.red,50002,ssl,00000000,888612,2025-03-20,09:50:36,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:24,OK,1.0000,1.0000,0.9022
electrum.rolgor.de,50002,ssl,00000000,888612,2025-03-20,09:50:36,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.1237
ax101.blockeng.ch,50002,ssl,00000000,888612,2025-03-20,09:50:36,electrs-esplora,0.4.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
vmd128083.contaboserver.net,50002,ssl,00000000,888612,2025-03-20,09:50:36,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
34.133.127.109,50002,ssl,00000000,888612,2025-03-20,09:50:37,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
34.133.127.109,50001,tcp,00000000,888612,2025-03-20,09:50:37,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
bitcoin.grey.pw,50001,tcp,00000000,888612,2025-03-20,09:50:37,Fulcrum,1.11.1,1.4,open,2025-03-20,10:03:17,OK,1.0000,1.0000,1.0000
bitcoin.grey.pw,50002,ssl,00000000,888612,2025-03-20,09:50:37,Fulcrum,1.11.1,1.4,open,2025-03-20,10:04:51,OK,1.0000,1.0000,1.0000
electrum-btc.nicevps.net,60001,ssl,00000000,888612,2025-03-20,09:50:37,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
104.198.149.61,50002,ssl,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9479
electrum1.cipig.net,10000,tcp,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9988
electrum1.cipig.net,20000,ssl,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9988
ulrichard.ch,50002,ssl,00000000,888612,2025-03-20,09:50:38,electrs-esplora,0.4.1,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
35.221.221.16,50002,ssl,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9994
35.221.221.16,50001,tcp,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9994
34.18.69.244,50002,ssl,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.18.69.244,50001,tcp,00000000,888612,2025-03-20,09:50:38,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.94.210.245,50001,tcp,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9999
34.94.210.245,50002,ssl,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
electrum.coineuskal.com,50001,tcp,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9025
electrum.coineuskal.com,50002,ssl,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8284
btc.ocf.sh,50001,tcp,00000000,888612,2025-03-20,09:50:39,electrs-esplora,0.4.1,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
btc.ocf.sh,50002,ssl,00000000,888612,2025-03-20,09:50:39,electrs-esplora,0.4.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
34.175.239.109,50002,ssl,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9999
260.whyza.net,50002,ssl,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8588
34.175.239.109,50001,tcp,00000000,888612,2025-03-20,09:50:39,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
34.39.9.100,50002,ssl,00000000,888612,2025-03-20,09:50:40,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9505
electrumx-p2p.prod-utility-eks-us-west-2.staked.cloud,50001,tcp,00000000,888612,2025-03-20,09:50:40,ElectrumX,1.16.0,1.4,open,2025-03-20,10:03:09,OK,1.0000,1.0000,0.9980
134.119.221.106,50002,ssl,00000000,888612,2025-03-20,09:50:40,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8887
134.119.221.106,50001,tcp,00000000,888612,2025-03-20,09:50:40,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8887
34.39.9.100,50001,tcp,00000000,888612,2025-03-20,09:50:40,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9505
bitcoin.mullvad.net,5000,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrum.turboblaster.it,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:07,OK,1.0000,1.0000,0.9269
caleb.vegas,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.8739
electrum3.cipig.net,10000,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9990
34.96.220.189,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9994
34.96.220.189,50001,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9994
electrum.coinfinity.co,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
bitcoin.mullvad.net,5010,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9268
35.197.22.214,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9998
35.197.22.214,50001,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9998
34.138.250.15,50001,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
34.138.250.15,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.101.170.221,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
34.101.170.221,50001,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
221.170.101.34.bc.googleusercontent.com,50001,tcp,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
221.170.101.34.bc.googleusercontent.com,50002,ssl,00000000,888612,2025-03-20,09:50:41,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
exsrv2.ignorelist.com,50002,ssl,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
exsrv2.ignorelist.com,50001,tcp,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,10:00:52,OK,1.0000,1.0000,1.0000
kirsche.emzy.de,50002,ssl,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
electrum.brainshome.de,50001,tcp,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,06:19:23,OK,1.0000,0.6758,0.6221
electrum.emzy.de,50002,ssl,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
bitcoin.threshold.p2p.org,50002,ssl,00000000,888612,2025-03-20,09:50:42,Fulcrum,1.11.1,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
electrum.bitaroo.net,50002,ssl,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
electrum.bitaroo.net,50001,tcp,00000000,888612,2025-03-20,09:50:42,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrum0.snel.it,50001,tcp,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9270
electrum2.cipig.net,10000,tcp,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9988
electrum2.cipig.net,20000,ssl,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9988
34.118.1.54,50001,tcp,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9525
34.118.1.54,50002,ssl,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9525
alviss.coinjoined.com,50002,ssl,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
alviss.coinjoined.com,50001,tcp,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrumx.dev,50001,tcp,00000000,888612,2025-03-20,09:50:43,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9938
electrum.stippy.com,50002,ssl,00000000,888612,2025-03-20,09:50:44,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9250
akiba.chainbow.io,50001,tcp,00000000,888612,2025-03-20,09:50:44,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
node1.btccuracao.com,50001,tcp,00000000,888612,2025-03-20,09:50:44,ElectrumX,1.16.0,1.4,open,2025-03-20,08:04:18,OK,1.0000,1.0000,0.9890
34.101.39.54,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
54.39.101.34.bc.googleusercontent.com,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
34.64.177.133,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9999
54.39.101.34.bc.googleusercontent.com,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
34.64.177.133,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9999
34.88.214.4,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9504
34.88.214.4,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9504
34.116.254.239,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.116.254.239,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
35.198.35.60,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
35.198.35.60,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
hodl.artyomk13.me,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,06:30:54,OK,1.0000,1.0000,0.9803
95.217.179.14,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.18.66.115,50001,tcp,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9501
34.18.66.115,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9501
34.101.39.54,50002,ssl,00000000,888612,2025-03-20,09:50:45,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9015
bitcoin.dermichi.com,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
170.64.183.239,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9008
206.189.83.21,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
35.194.147.142,50001,tcp,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
35.194.147.142,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
34.121.73.82,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
34.121.73.82,50001,tcp,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
34.173.233.138,50001,tcp,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9504
5.78.65.104,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9953
34.173.233.138,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9504
5.78.90.154,50002,ssl,00000000,888612,2025-03-20,09:50:46,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9953
165.22.98.208,50002,ssl,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
lille.anties.org,50002,ssl,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
blkhub.net,50002,ssl,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9183
5.161.104.106,50002,ssl,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9959
135.181.36.122,50002,ssl,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
lille.anties.org,50001,tcp,00000000,888612,2025-03-20,09:50:47,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9272
paris.anties.org,50002,ssl,00000000,888612,2025-03-20,09:50:48,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
fortress.qtornado.com,50002,ssl,00000000,888612,2025-03-20,09:50:48,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9983
139.59.232.148,50002,ssl,00000000,888612,2025-03-20,09:50:48,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
fortress.qtornado.com,443,ssl,00000000,888612,2025-03-20,09:50:48,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9983
paris.anties.org,50001,tcp,00000000,888612,2025-03-20,09:50:48,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9272
157.230.254.6,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
se-mma-crypto-payments-001.mullvad.net,5000,tcp,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
dijon.anties.org,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
128.0.190.26,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
209.97.160.100,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
btc-main.compumundohipermegared.one,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9268
exs.dyshek.org,50001,tcp,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9961
116.203.86.228,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
65.108.146.20,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
exs.dyshek.org,50002,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9961
se-mma-crypto-payments-001.mullvad.net,5010,ssl,00000000,888612,2025-03-20,09:50:49,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9272
159.223.40.244,50002,ssl,00000000,888612,2025-03-20,09:50:50,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
electrum.bitrefill.com,50002,ssl,00000000,888612,2025-03-20,09:50:50,ElectrumX,1.16.0,1.4,open,2025-03-20,10:03:10,OK,1.0000,1.0000,1.0000
175.41.191.135,50002,ssl,00000000,888612,2025-03-20,09:50:50,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9017
ec2-175-41-191-135.ap-southeast-1.compute.amazonaws.com,50002,ssl,00000000,888612,2025-03-20,09:50:50,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9017
btc.hodler.ninja,50002,ssl,00000000,888612,2025-03-20,09:50:50,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
btc.aftrek.org,50001,tcp,00000000,888612,2025-03-20,09:50:51,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
btc.aftrek.org,50002,ssl,00000000,888612,2025-03-20,09:50:51,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
kareoke.qoppa.org,50002,ssl,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
kareoke.qoppa.org,50001,tcp,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
164.92.148.39,50002,ssl,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
164.92.148.39,50001,tcp,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
electrum.acinq.co,50002,ssl,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.15.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
37.27.18.174,50002,ssl,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
stavver.dyshek.org,50002,ssl,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
stavver.dyshek.org,50001,tcp,00000000,888612,2025-03-20,09:50:52,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
skbxmit.coinjoined.com,50001,tcp,00000000,888612,2025-03-20,09:50:53,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
skbxmit.coinjoined.com,50002,ssl,00000000,888612,2025-03-20,09:50:53,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
167.172.71.79,50002,ssl,00000000,888612,2025-03-20,09:50:53,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
marseille.anties.org,50001,tcp,00000000,888612,2025-03-20,09:50:53,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
marseille.anties.org,50002,ssl,00000000,888612,2025-03-20,09:50:54,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
128.140.67.192,50002,ssl,00000000,888612,2025-03-20,09:50:54,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
137.184.125.23,50002,ssl,00000000,888612,2025-03-20,09:50:54,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
137.184.125.23,50001,tcp,00000000,888612,2025-03-20,09:50:54,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrumx-btc.cryptonermal.net,50002,ssl,00000000,888612,2025-03-20,09:50:55,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9102
electrumx-btc.cryptonermal.net,50001,tcp,00000000,888612,2025-03-20,09:50:55,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9102
eai.coincited.net,50001,tcp,00000000,888612,2025-03-20,09:50:57,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
eai.coincited.net,50002,ssl,00000000,888612,2025-03-20,09:50:57,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
52.1.56.181,50002,ssl,00000000,888612,2025-03-20,09:50:58,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9030
52.1.56.181,50001,tcp,00000000,888612,2025-03-20,09:50:58,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9030
gods-of-rock.screaminglemur.net,50002,ssl,00000000,888612,2025-03-20,09:50:58,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9030
gods-of-rock.screaminglemur.net,50001,tcp,00000000,888612,2025-03-20,09:50:58,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.9030
guichet.centure.cc,50002,ssl,00000000,888612,2025-03-20,09:50:59,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9272
elx.bitske.com,50002,ssl,00000000,888612,2025-03-20,09:50:59,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
elx.bitske.com,50001,tcp,00000000,888612,2025-03-20,09:50:59,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
guichet.centure.cc,50001,tcp,00000000,888612,2025-03-20,09:50:59,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
143.198.108.195,50002,ssl,00000000,888612,2025-03-20,09:51:01,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
143.198.108.195,50001,tcp,00000000,888612,2025-03-20,09:51:01,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
ecdsa.net,110,ssl,00000000,888612,2025-03-20,09:51:02,ElectrumX,1.10.0,1.4,open,2025-03-20,10:04:50,OK,1.0000,1.0000,1.0000
electrum.hsmiths.com,50002,ssl,00000000,888612,2025-03-20,09:51:02,ElectrumX,1.10.0,1.4,open,2025-03-20,10:04:50,OK,1.0000,1.0000,1.0000
btce.iiiiiii.biz,50002,ssl,00000000,888612,2025-03-20,09:51:02,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
btce.iiiiiii.biz,50001,tcp,00000000,888612,2025-03-20,09:51:02,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
electrumx.iodata.org,50002,ssl,00000000,888612,2025-03-20,09:51:04,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,0.9261
167.172.42.31,50001,tcp,00000000,888612,2025-03-20,09:51:06,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
167.172.42.31,50002,ssl,00000000,888612,2025-03-20,09:51:06,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
68.183.188.105,50001,tcp,00000000,888612,2025-03-20,09:51:08,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
68.183.188.105,50002,ssl,00000000,888612,2025-03-20,09:51:08,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
157.245.172.236,50001,tcp,00000000,888612,2025-03-20,09:51:08,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9016
157.245.172.236,50002,ssl,00000000,888612,2025-03-20,09:51:08,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9016
142.93.6.38,50002,ssl,00000000,888612,2025-03-20,09:51:14,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9971
142.93.6.38,50001,tcp,00000000,888612,2025-03-20,09:51:14,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,0.9971
104.248.139.211,50001,tcp,00000000,888612,2025-03-20,09:51:15,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,1.0000
104.248.139.211,50002,ssl,00000000,888612,2025-03-20,09:51:15,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
horsey.cryptocowboys.net,50002,ssl,00000000,888612,2025-03-20,09:51:23,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.7111
horsey.cryptocowboys.net,50001,tcp,00000000,888612,2025-03-20,09:51:23,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:04,OK,1.0000,1.0000,0.8299
167.172.226.175,50002,ssl,00000000,888612,2025-03-20,09:51:31,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
167.172.226.175,50001,tcp,00000000,888612,2025-03-20,09:51:31,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
178.62.80.20,50001,tcp,00000000,888612,2025-03-20,09:51:31,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:05,OK,1.0000,1.0000,1.0000
178.62.80.20,50002,ssl,00000000,888612,2025-03-20,09:51:31,ElectrumX,1.16.0,1.4,open,2025-03-20,02:40:06,OK,1.0000,1.0000,1.0000
coin01.ssdata.dk,50002,ssl,00000000,888612,2025-03-20,09:51:55,Fulcrum,1.11.0,1.4,open,2025-03-20,08:00:10,OK,1.0000,0.9686,0.8954
coin01.ssdata.dk,50001,tcp,00000000,888612,2025-03-20,09:51:55,Fulcrum,1.11.0,1.4,open,2025-03-20,09:16:42,OK,1.0000,0.9606,0.8942
xtrum.com,50002,ssl,00000000,888612,2025-03-20,09:57:16,Fulcrum,1.11.1,1.4,open,2025-03-20,08:06:13,OK,1.0000,0.9731,0.9897`
const configs = configStr.split('\n').map(line => {
  const [host, port, protocol] = line.split(',')
  return { host, port, protocol }
})
const controlAddresses = [
  '1PJiGp2yDLvUgqeBsuZVCBADArNsk6XEiw',
  '31oMgrBjhbAr1ZZjFUFYfDT1ZYvx3Qp9qL',
  '1NBX1UZE3EFPTnYNkDfVhRADvVc8v6pRYu',
  'bc1q2f0tczgrukdxjrhhadpft2fehzpcrwrz549u90',
  'bc1qa3phj5uhnuauk6r62cku6r6fl9rawqx4n6d690',
]

const eClients = []

async function init() {
  if (eClients.length > 0)
    return;


  const controlRes = await pullFromBlockchainInfo(controlAddresses)
  let contolAddress, controlAddrBalance

  for (let i = 0; i < controlAddresses.length; i++) {
    contolAddress = controlAddresses[i]
    controlAddrBalance = controlRes[contolAddress]
    if (controlAddrBalance > 0) {
      break
    }
  }
  const scripthash = addressToScripthash(contolAddress);
  await PromisePool
    .withConcurrency(15)
    .for(configs)
    .process(async ({ host, port, protocol }) => {
      const client = new ElectrumClient(port, host, protocol)
      try {

        await client.connect();
        await client.server_version('bitske', '1.4');
        const balance = await client.blockchainScripthash_getBalance(scripthash);
        // console.log(`Balance for address ${contolAddress}:`);
        // console.log(`Confirmed: ${balance.confirmed} satoshis`);
        if (balance.confirmed >= controlAddrBalance / 2) {
          // console.log(`Found a working bitcoin server: ${host}:${port}`);
          eClients.push(client);
        }
      } catch (error) {
        // await client.close();
        // console.error('Error querying balance:', error);
        await client.close();
      } finally {
      }
    })
  console.log('Bitcoin: working electrum clients', eClients.length)
}

async function pullFromBlockchainInfo(addresses, noAllium = false) {

  if (addresses.length > 30 && !noAllium) {
    try {
      const response = await pullFromAllium(addresses)
      return response
    } catch (error) {
      const chunks = sliceIntoChunks(addresses, 90)
      const addressResponseMap = {}
      for (const chunk of chunks) {
        const response = await pullFromAllium(chunk, true)
        if (chunks.length > 3)
          await sleep(30000)
        Object.assign(addressResponseMap, response)
      }
      return addressResponseMap
    }
  }

  try {

    const query = addrs => 'https://blockchain.info/multiaddr?active=' + addrs.join('|')
    const { data } = await axios.get(query(addresses), { timeout: 20 * 60 * 1000 })
    const addressResponseMap = {}
    data.addresses.forEach(addr => {
      addressResponseMap[addr.address] = addr.final_balance
    })
    addresses.forEach(addr => {
      if (!addressResponseMap[addr])
        addressResponseMap[addr] = 0
    })
    return addressResponseMap
  } catch (error) {
    return pullFromAllium(addresses)
  }
}

function addressToScripthash(address) {
  const script = bitcoin.address.toOutputScript(address);
  const hash = bitcoin.crypto.sha256(script);
  return Buffer.from(hash.reverse()).toString('hex');
}


module.exports = {
  init,
  eClients,
  addressToScripthash,
  pullFromBlockchainInfo,
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}